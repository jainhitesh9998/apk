{"info":{"title":"GolfCart CloudFunctions","version":"1.0.0","description":"User Documentation for the golfcart Application","server":{"url":"https://us-central1-golfcart-f28c0.cloudfunctions.net/api/"}},"swagger":"2.0","paths":{"/booking/history/:username":{"get":{"summary":"Returns All the bookings done by a user.","description":"returns All the bookings done by the user","tags":["booking"],"produces":["application/json"],"responses":{"200":{"description":"List of Bookings Done by the user","schema":{"$ref":"#/definitions/booking"}},"404":{"desctiption":"Not found"}}}},"/booking/:reference":{"get":{"description":"Gets the Booking Details with the reference","summary":"Gets the Booking Details with the reference","tags":["booking"],"produces":["application/json"],"responses":{"200":{"description":"Booking Object","schema":{"$ref":"#/definitions/booking"}},"404":{"desctiption":"Not found"}}}},"/booking/":{"put":{"summary":"updates a booking from the booking DB","description":"","tags":["booking"],"consumes":["application/json"],"produces":["application/json"],"operationId":"update Booking","parameters":[{"in":"body","name":"body","description":"Booking Details That needs to be updated in the table, to cancel the booking, send the status CANCELLED","required":true,"schema":{"$ref":"#/definitions/booking"}}],"responses":{"200":{"description":"updated booking object","schema":{"$ref":"#/definitions/booking"}},"400":{"desctiption":"Unable To update booking"}}},"get":{"description":"Gets the all the Booking Details","summary":"Gets the all the Booking Details","tags":["booking"],"produces":["application/json"],"responses":{"200":{"description":"Booking Object","schema":{"$ref":"#/definitions/booking"}},"404":{"desctiption":"Not found"}}},"post":{"summary":"Creates A Booking for the User","description":"This route creates a booking for A particular user","tags":["booking"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addBooking","parameters":[{"in":"body","name":"body","description":"Booking Details That needs to be added to the table","required":true,"schema":{"$ref":"#/definitions/bookingrequest"}}],"responses":{"200":{"description":"Object of Added booking","schema":{"$ref":"#/definitions/booking"}},"400":{"desctiption":"Unable To add booking"}}}},"/golfcart/distance/{name}/{station}":{"get":{"description":"returns Returns All the bookings Associated with the cart","parameters":[{"in":"path","name":"name","schema":{"type":"string"},"description":"The cart name"},{"in":"path","name":"location","schema":{"type":"string"},"description":"the Location for tracking distance"}],"tags":["golfcart"],"produces":["application/json"],"responses":{"200":{"description":"Duration and distance between the cart and station.","schema":{"$ref":"#/definitions/booking"}},"404":{"desctiption":"Not found"}}}},"/golfcart/{name}":{"get":{"description":"Returns A Golfcart By the name","parameters":[{"in":"path","name":"name","schema":{"type":"string"},"description":"The cart name"}],"tags":["golfcart"],"produces":["application/json"],"responses":{"200":{"description":"A Golfcart Object","schema":{"$ref":"#/definitions/golfcart"}},"404":{"desctiption":"Not found"}}}},"/golfcart/":{"get":{"description":"Returns A List of All golfcarts","tags":["golfcart"],"produces":["application/json"],"responses":{"200":{"description":"List of all golfcarts","schema":{"$ref":"#/definitions/golfcart"}},"404":{"desctiption":"Not found"}}},"post":{"summary":"adds a station to the table","description":"","tags":["golfcart"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addStation","parameters":[{"in":"body","name":"body","description":"golfcart that needs to be added to the table","required":true,"schema":{"$ref":"#/definitions/golfcartAdd"}}],"responses":{"200":{"description":"Object of Added golfcart","schema":{"$ref":"#/definitions/golfcart"}},"400":{"desctiption":""}}}},"/golfcart":{"put":{"summary":"updates a golfcart from the document","description":"","tags":["golfcart"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addStation","parameters":[{"in":"body","name":"body","description":"golfcart that needs to be updated in the document","required":true,"schema":{"$ref":"#/definitions/golfcartAdd"}}],"responses":{"200":{"description":"Object of Added User","schema":{"$ref":"#/definitions/golfcart"}},"400":{"desctiption":""}}},"delete":{"summary":"removes a golfcart from the DB","description":"","tags":["golfcart"],"consumes":["application/json"],"produces":["application/json"],"operationId":"removeCart","parameters":[{"in":"body","name":"body","description":"golfcart that needs to be removed from the document","required":true,"schema":{"$ref":"#definitions/cart"}}],"responses":{"200":{"description":"Removed Cart"},"400":{"desctiption":""}}}},"/golfcart/available":{"post":{"summary":"Lists All the available golfcarts between the origin and the destination station","description":"","tags":["golfcart"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addStation","parameters":[{"in":"body","name":"body","description":"src station, destination station and the share status","required":true,"schema":{"$ref":"#/definitions/listAvailable"}}],"responses":{"200":{"description":"List of available golfcarts","schema":{"$ref":"#/definitions/golfcart"}},"400":{"desctiption":""}}}},"/golfcart/trip":{"put":{"summary":"Accept the booking from a cart.","description":"","tags":["golfcart"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addStation","parameters":[{"in":"body","name":"body","description":"Booking that needs to be updated","required":true,"schema":{"$ref":"#/definitions/acceptBooking"}}],"responses":{"200":{"description":"List of available golfcarts","schema":{"$ref":"#/definitions/booking"}},"400":{"desctiption":""}}}},"/station":{"get":{"description":"Returns All the stations in the DB","tags":["station"],"produces":["application/json"],"responses":{"200":{"description":"List of All Station Objects","schema":{"$ref":"#/definitions/station"}},"404":{"desctiption":"Not found"}}}},"/station/:name":{"get":{"description":"Returns A station with Given Name","tags":["station"],"produces":["application/json"],"responses":{"200":{"description":"A Station Object With Given Name","schema":{"$ref":"#/definitions/station"}},"404":{"desctiption":"Not found"}}}},"/station/":{"post":{"summary":"adds a station to the table","description":"","tags":["station"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addStation","parameters":[{"in":"body","name":"body","description":"station that needs to be added to the table","required":true,"schema":{"$ref":"#/definitions/stationAdd"}}],"responses":{"200":{"description":"Object of Added User","schema":{"$ref":"#/definitions/station"}},"400":{"desctiption":""}}},"put":{"summary":"updates a station from the table","description":"","tags":["station"],"consumes":["application/json"],"produces":["application/json"],"operationId":"update","parameters":[{"in":"body","name":"body","description":"Updates the station in the DB","required":true,"schema":{"$ref":"#/definitions/station"}}],"responses":{"200":{"description":"Object of Added User","schema":{"$ref":"#/definitions/stationUpdate"}},"400":{"desctiption":""}}}},"/station/location":{"post":{"summary":"Lists the nearby stations based on the GeoLocation","description":"","tags":["station"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","description":"Finds the nearby stations","required":true,"schema":{"$ref":"#/definitions/geopoint"}}],"responses":{"200":{"description":"NearBy station List in descending Order","schema":{"$ref":"#/definitions/station"}},"400":{"desctiption":""}}}},"/station/destinations":{"post":{"summary":"Lists the destinations served for the selected Origin station","description":"","tags":["station"],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","description":"","required":true,"schema":{"$ref":"#/definitions/bookingrequest"}}],"responses":{"200":{"description":"Destination List Served By the golfcart","schema":{"$ref":"#/definitions/station"}},"400":{"desctiption":""}}}},"/user/:username":{"get":{"description":"Returns a User with \"Username\"","tags":["users"],"produces":["application/json"],"responses":{"200":{"description":"An User Object","schema":{"$ref":"#/definitions/user"},"content":{"application/json":{"examples":{"ex1":{"value":[{"id":"user-sa154dsfa6s5","username":"testcandidate","currentBooking":"","name":"test candidate","email":"test@test.com"}]}}}},"example":{"id":"user-sa154dsfa6s5","username":"testcandidate","currentBooking":"","name":"test candidate","email":"test@test.com"}},"404":{"desctiption":"Not found"}}}},"/user/":{"get":{"description":"returns all users","tags":["users"],"produces":["application/json"],"responses":{"200":{"description":"List Of User Objects","schema":{"$ref":"#/definitions/user"},"example":{"obj1":{"id":"user-sa154dsfa6s5","username":"testcandidate","currentBooking":"","name":"test candidate","email":"test@test.com"},"obj2":{"id":"user-saas54dsfa6s5","username":"test1candidate","currentBooking":"","name":"test1 candidate","email":"test1@test.com"}}},"404":{"desctiption":"Not found"}}},"post":{"summary":"adds a user to the table","description":"","tags":["users"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addUser","parameters":[{"in":"body","name":"body","description":"User that needs to be added to the table","required":true,"schema":{"$ref":"#/definitions/userAdd"}}],"responses":{"200":{"description":"Object of Added User","schema":{"$ref":"#/definitions/user"},"example":{"obj1":{"id":"user-sa154dsfa6s5","username":"testcandidate","currentBooking":"","name":"test candidate","email":"test@test.com"}}},"400":{"desctiption":"Unable To add User"}}},"put":{"summary":"Updates User From Table","description":"","tags":["users"],"consumes":["application/json"],"produces":["application/json"],"operationId":"addUser","parameters":[{"in":"body","name":"body","description":"User with Updated Values","required":true,"schema":{"$ref":"#/definitions/user"}}],"responses":{"200":{"description":"Object of Added User","schema":{"$ref":"#/definitions/user"},"example":{"obj1":{"id":"user-sa154dsfa6s5","username":"testcandidate","currentBooking":"","name":"test candidate","email":"test@test.com"}}},"400":{"desctiption":"Unable To add User"}}}}},"definitions":{"booking":{"properties":{"reference":{"type":"string autogenerated","example":"book-sa154dsfa6s5"},"originStation":{"type":"string","example":"building 32"},"destinationStation":{"type":"string","example":"building 33"},"golfcart":{"type":"string","example":"cart1"},"user":{"type":"string","example":"testuser"},"status":{"type":"string","enum":["initiated","booked","started","completed","cancelled","aborted"]},"bookingTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"startTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"endTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"location":{"$ref":"#definitions/geopoint"},"distanceMatrixElement":{"$ref":"#definitions/DME"},"shareStatus":{"type":"boolean","example":true},"numOfSeats":{"type":"number","example":2},"OTP":{"type":"string","example":3564},"distance":{"type":"string","example":"1.0 km"},"duration":{"type":"string","example":"15 mins"}}},"bookingInsert":{"properties":{"originStation":{"type":"string","example":"building 32"},"destinationStation":{"type":"string","example":"building 33"},"golfcart":{"type":"string","example":"cart1"},"user":{"type":"string","example":"testuser"},"status":{"type":"string","example":"initiated"},"bookingTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"startTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"endTime":{"type":"timestamp","example":"2018-12-05T08:07:07.495Z"},"location":{"$ref":"#definitions/geopoint"},"distanceMatrixElement":{"$ref":"#definitions/DME"},"shareStatus":{"type":"boolean","example":true},"numOfSeats":{"type":"number","example":2},"OTP":{"type":"string","example":3564},"distance":{"type":"string","example":"1.0 km"},"duration":{"type":"string","example":"15 mins"}}},"bookingrequest":{"properties":{"user":{"type":"string","example":"testuser"},"originStation":{"type":"string","example":"building 32"},"destinationStation":{"type":"string","example":""},"shareStatus":{"type":"boolean","example":true},"numOfSeats":{"type":"number","example":2}}},"geopoint":{"properties":{"latitude":{"type":"number","example":12.849459},"longitude":{"type":"number","example":77.666465}}},"DME":{"properties":{"status":{"type":"string","example":"OK"},"distance":{"$ref":"#definitions/distanceElement"},"duration":{"$ref":"#definitions/durationElement"}}},"distanceElement":{"properties":{"text":{"type":"string","example":"4 Km"},"value":{"type":"number","example":4000}}},"durationElement":{"properties":{"text":{"type":"string","example":"4 Mins"},"value":{"type":"number","example":430}}},"cart":{"properties":{"name":{"type":"string","example":"cart14"}}},"listAvailable":{"properties":{"origin":{"type":"string","example":"building 32"},"destination":{"type":"string","example":"building 35"},"shareStatus":{"type":"boolean","example":true}}},"acceptBooking":{"properties":{"name":{"type":"string","description":"Golfcart Name","example":"cart1"},"bookingReference":{"type":"string","example":"book-asjdauf212"},"OTP":{"type":"string","example":"1234"},"action":{"type":"string","enum":["accept","alert","start","finish","release"]}}},"startTour":{"properties":{"name":{"type":"string","description":"Golfcart Name","example":"cart1"},"bookingReference":{"type":"string","example":"book-asjdauf212"},"OTP":{"type":"string","example":"1215"}}},"golfcart":{"properties":{"name":{"type":"string","example":"cart1"},"currentAddress":{"type":"string","example":"Building 32"},"originStations":{"type":"array","items":{"type":"string"},"example":["building 32","building 33"]},"destinationStations":{"type":"array","items":{"type":"string"},"example":["building 32","building 33"]},"currentLocation":{"$ref":"#definitions/geopoint"},"status":{"type":"string","enum":["sharedAvailable","available","shared","assigned","abandoned"]},"distanceMatrixElement":{"$ref":"#definitions/DME"},"bookings":{"type":"array","items":{"type":"string"},"example":["book-1232adasd","book-2vgfs23d"]},"capacity":{"type":"string","example":6}}},"golfcartAdd":{"properties":{"name":{"type":"string","example":"cart1"},"currentAddress":{"type":"string","example":"Building 32"},"originStations":{"type":"array","items":{"type":"string"},"example":["building 32","building 33"]},"destinationStations":{"type":"array","items":{"type":"string"},"example":["building 32","building 33"]},"currentLocation":{"$ref":"#definitions/geopoint"},"status":{"type":"string","example":"sharedAvailable"},"distanceMatrixElement":{"$ref":"#definitions/DME"},"bookings":{"type":"array","items":{"type":"string"},"example":["book-1232adasd","book-2vgfs23d"]},"capacity":{"type":"string","example":6}}},"station":{"properties":{"id":{"type":"string AutoGenerated","example":"station-sa154dsfa6s5"},"name":{"type":"string","example":"building 32"},"address":{"type":"string","example":"building 32 Infosys"},"location":{"$ref":"#definitions/geopoint"}}},"stationUpdate":{"properties":{"id":{"type":"string AutoGenerated","example":"station-sa154dsfa6s5"},"name":{"type":"string","example":"building 33"},"address":{"type":"string","example":"building 33 Infosys"},"location":{"$ref":"#definitions/geopoint"}}},"stationAdd":{"properties":{"name":{"type":"string","example":"building 32"},"location":{"$ref":"#definitions/geopoint"}}},"user":{"properties":{"id":{"type":"string AutoGenerated","example":"user-sa154dsfa6s5"},"username":{"type":"string","example":"testcandidate"},"name":{"type":"string","example":"test candidate"},"email":{"type":"string","example":"test@test.com"},"currentBooking":{"type":"string","example":"book-23242skacasa"},"fcmToken":{"type":"string","example":"5a11da1a78ad0casd"}}},"userAdd":{"properties":{"username":{"type":"string","example":"testcandidate"},"name":{"type":"string","example":"test candidate"},"email":{"type":"string","example":"test@test.com"},"currentBooking":{"type":"string","example":"book-23242skacasa"}}}},"responses":{},"parameters":{},"securityDefinitions":{},"tags":[]}